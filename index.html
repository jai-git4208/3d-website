<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Jai's 3D Website</title>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <canvas id="bg"></canvas>

  <main>
    <header>
      <h1>jai's 3d website</h1>
      <p>Meow meow meow purr...</p>
    </header>

    <section class="left">
      <p>
        My self jaimin and i like a cupcake. Sweeeet little cupcake.
      </p>
    </section>

    <section class="light">
      <h2>About Me</h2>
      <p>
        I am a high school student and i love to code. because it's kinda cool how someone can follow my stupid
        instructions.(my cupcake does that tooo!)
    </section>

    <section class="projects-section">
      <h2>My GitHub Projects</h2>
      <div id="projects-container">
        <p class="loading">Loading projects...</p>
      </div>
    </section>
  </main>

  <script type="module" src="/three.js"></script>
  <script>
    async function fetchGitHubProjects() {
      const container = document.getElementById('projects-container');
      const username = 'jai-git4208';

      try {
        const response = await fetch(`https://api.github.com/users/${username}/repos?sort=updated&per_page=6`);
        const repos = await response.json();

        if (repos.length === 0) {
          container.innerHTML = '<p>No public repositories found.</p>';
          return;
        }

        container.innerHTML = repos.map(repo => `
          <a href="${repo.html_url}" target="_blank" class="project-card">
            <h3>${repo.name}</h3>
            <p>${repo.description || 'No description available'}</p>
            <div class="project-meta">
              ${repo.language ? `<span class="language">${repo.language}</span>` : ''}
              <span class="stars">‚≠ê ${repo.stargazers_count}</span>
              <span class="forks">üç¥ ${repo.forks_count}</span>
            </div>
          </a>
        `).join('');

      } catch (error) {
        container.innerHTML = '<p>Failed to load projects. Please try again later.</p>';
        console.error('Error fetching GitHub repos:', error);
      }
    }

    fetchGitHubProjects();
  </script>

  <!-- Click Particle Effect -->
  <style>
    .particle {
      position: fixed;
      pointer-events: none;
      border-radius: 50%;
      z-index: 9999;
      animation: particle-burst 0.8s ease-out forwards;
    }

    @keyframes particle-burst {
      0% {
        transform: translate(-50%, -50%) scale(1);
        opacity: 1;
      }

      100% {
        transform: translate(-50%, -50%) scale(0);
        opacity: 0;
      }
    }
  </style>

  <script>
    document.addEventListener('click', (e) => {
      createParticles(e.clientX, e.clientY);
    });

    function createParticles(x, y) {
      const colors = ['#ff6b6b', '#4ecdc4', '#45b7d1', '#96ceb4', '#ffeaa7', '#dfe6e9', '#fd79a8', '#a29bfe'];
      const particleCount = 12;

      for (let i = 0; i < particleCount; i++) {
        const particle = document.createElement('div');
        particle.className = 'particle';

        // Random size
        const size = Math.random() * 10 + 5;
        particle.style.width = `${size}px`;
        particle.style.height = `${size}px`;

        // Random color
        particle.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];

        // Position at click
        particle.style.left = `${x}px`;
        particle.style.top = `${y}px`;

        // Random direction
        const angle = (Math.PI * 2 / particleCount) * i + Math.random() * 0.5;
        const velocity = Math.random() * 80 + 40;
        const dx = Math.cos(angle) * velocity;
        const dy = Math.sin(angle) * velocity;

        particle.style.animation = 'none';
        particle.offsetHeight; // Trigger reflow
        particle.style.animation = `particle-burst 0.8s ease-out forwards`;

        document.body.appendChild(particle);

        // Animate position
        let startTime = null;
        function animateParticle(timestamp) {
          if (!startTime) startTime = timestamp;
          const progress = (timestamp - startTime) / 800;

          if (progress < 1) {
            particle.style.left = `${x + dx * progress}px`;
            particle.style.top = `${y + dy * progress + 20 * progress * progress}px`; // Add gravity
            requestAnimationFrame(animateParticle);
          } else {
            particle.remove();
          }
        }
        requestAnimationFrame(animateParticle);
      }
    }
  </script>
</body>

</html>